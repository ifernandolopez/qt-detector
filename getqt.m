function Ts = getqt(Q)% Calculates the quantization table for specified Q% Q- quality factor (0-100)% Return Ts - scaled quantization table for specified Q% See: https://stackoverflow.com/questions/29215879/how-can-i-generalize-the-quantization-matrix-in-jpeg-compression% Using JPEG quantization tables to identify imagery processed by software% Calculate standard tableglobal T;if (Q<=100)  if (isempty(T))    T = cell(100);  elseif (not(isempty(T{Q})))    Ts = T{Q};    return;  end  %  Tb JPEG base quantization table  Tb = [16 11 10 16 24 40 51 61; 12 12 14 19 26 58 60 55; ...       14 13 16 24 40 57 69 56; 14 17 22 29 51 87 80 62; ...       18 22 37 56 68 109 103 77; 24 35 55 64 81 104 113 92; ...       49 64 78 87 103 121 120 101; 72 92 95 98 112 100 103 99];  % Determine S  if (Q < 50)      S = 5000/Q;  else      S = 200 - 2*Q;  end  % Determine scaled quantization table for specified Q  Ts = floor((S*Tb + 50) / 100);  Ts(Ts == 0) = 1; % Prevent divide by 0 error   else  error('Unspected Q');endT{Q} = Ts;    